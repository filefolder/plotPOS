# plotPOS version 0.1 
python plotter for POS (PBO Station Position Time Series) geodesy data, among other things

requires: python3, numpy, scipy, matplotlib

the code as of now is geared towards GAMIT/GLOBK data (e.g. the format of the rename/eq files)
but with a little tweaking it should be easy enough to use anything. on that note the inspiration behind 
a lot of the aesthetic design here is based on the plots generated by sh_plot_pos (mike floyd) which 
is included in the wonderful gamit/globk suite (http://geoweb.mit.edu/gg/).

code needs review and tweaking but if you just need some nice looking plots (and/or want to calculate coseismic
offsets and/or correct for these) you're good to go. 

usage: plotPOS.py       [-h] [-plotdir PLOTDIR] [-eqfiles RENAMEFILES]
                        [-numproc NUMPROC] [-days_per_data DAYS_PER_DATA]
                        [-save] [-fix_offsets] [-dont_overwrite] [-savenpz]
                        [-interactive] [-vert_residual] [-write_verts]
                        [-write_offsets] [-plot_spectral]
                        targetdir_or_file

VERSION 0.1 // plot POS files and fix offsets and other things

positional arguments:
  targetdir_or_file     filename or directory containing POS files

optional arguments:
  -h, --help            show this help message and exit
  -plotdir PLOTDIR      where output files are put
  -eqfiles RENAMEFILES  rename files (full path, comma separated)
  -numproc NUMPROC      number processes
  -days_per_data DAYS_PER_DATA
                        days combined per datapoint (default = 1 day/file)
  -save                 save plots to plotdir?
  -fix_offsets          fix offsets listed in eqfiles? (FALSE)
  -dont_overwrite       dont overwrite existing plots (FALSE)
  -savenpz              save data as numpy binary? (FALSE)
  -interactive          enter interactive plot mode? (FALSE)
  -vert_residual        take residual of vertical data? (FALSE)
  -write_offsets        write calculated offsets to an eqfile? (FALSE)
  -plot_spectral        also plot spectral power density
                        information? (FALSE)

# example 

$ plotPOS.py AUCK.anu.orbit_unkno.pos -plotdir plots -eqfiles auck.eq -fix_offsets -write_offsets -plot_spectral

# features:

- fully parallel

- calculates and optionally corrects for coseismic offsets by comparing a series of weighted low pass filters
   (also optionally writes these out as a gamit/globk "earthquake" .eq file)

- plots these low-pass position filters (defaults to 3 months & 1 year) for non-uniform timeseries

- optionally plots power density spectra

- optional interactive mode to zoom in and easily identify DOY dates for ill-fitting data (good for marking bad campaign data) 

# TODOs

-calculate both white and frequency-dependent noise via spectral fitting 

-make some plot settings more sane

-lots of tiny formatting issues

thanks & bear with me here. comments / tips / bug reports appreciated
